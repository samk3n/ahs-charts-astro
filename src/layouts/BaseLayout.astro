---
import "@/styles/global.css";
import Navbar from "@/components/Navbar.astro";
import Footer from "@/components/Footer.astro";

const {
    title = "AHS Ratings",
    description = "Rate every season of American Horror Story and explore the latest charts.",
} = Astro.props;
---

<!doctype html>
<html lang="en" data-theme="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{title}</title>
        <meta name="description" content={description} />
        <!-- Display font for spooky headings -->
        <!-- <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;700&display=swap"
            rel="stylesheet"
        /> -->
        <!-- optional: add Open Graph/Twitter meta later -->
        <script is:inline>
            // apply saved theme early
            (function () {
                try {
                    const saved = localStorage.getItem("theme");
                    if (saved === "light")
                        document.documentElement.setAttribute(
                            "data-theme",
                            "light",
                        );
                } catch {}
            })();

            // single global toggler
            window.__toggleTheme = function () {
                const el = document.documentElement;
                const current = el.getAttribute("data-theme") || "dark";
                const next = current === "light" ? "dark" : "light";
                el.setAttribute("data-theme", next);
                try {
                    localStorage.setItem("theme", next);
                } catch {}
            };
        </script>
    </head>
    <body class="min-h-dvh flex flex-col text-text">
        <Navbar />
        <main class="flex-1">
            <slot />
        </main>
        <Footer />
        <script is:inline>
            // Expose a tiny helper for a future toggle button
            window.__setTheme = (t) => {
                document.documentElement.setAttribute("data-theme", t);
                localStorage.setItem("theme", t);
            };
        </script>
    </body>
</html>
